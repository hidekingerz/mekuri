# mekuri - 要件定義書

## 概要

**mekuri** は、圧縮ファイル（ZIP/RAR/7z等）内の画像を見開き表示で閲覧するためのデスクトップアプリケーションである。Tauri（Rust + React）で構成される。

## 用語定義

| 用語 | 説明 |
|------|------|
| アーカイブ | ZIP, RAR, 7z 等の圧縮ファイル |
| 見開き表示 | 2ページを左右に並べて表示するモード |
| フォルダツリー | ディレクトリ階層をツリー形式で表示するUI |

## ウィンドウ構成

アプリケーションは2つのウィンドウで構成される。

### 1. メインウィンドウ

フォルダツリーによるファイルブラウジングを担当する。

**機能要件:**

- FR-M1: 指定したルートディレクトリ配下をフォルダツリーとして表示する
- FR-M2: フォルダの展開・折りたたみができる
- FR-M3: アーカイブファイル（ZIP/RAR/7z）をアイコンまたは拡張子で識別表示する
- FR-M4: アーカイブファイルをクリック（またはダブルクリック）するとビューワーウィンドウを開く
- FR-M5: ルートディレクトリを変更できる（フォルダ選択ダイアログ）

### 2. ビューワーウィンドウ

アーカイブ内の画像を見開き表示する。

**機能要件:**

- FR-V1: アーカイブ内の画像ファイルを自然順（natural sort）でソートして表示する
- FR-V2: 見開き表示（2ページ並列）をデフォルトとする
- FR-V3: ページ送り（次へ/前へ）ができる（キーボード・クリック）
- FR-V4: 右綴じ（右から左へ読む）をデフォルトとする
- FR-V5: 画像をウィンドウサイズに合わせてフィットさせる
- FR-V6: 先頭ページ（表紙）は単ページ表示とする

## 対応フォーマット

### アーカイブ形式

| 形式 | 拡張子 | 優先度 |
|------|--------|--------|
| ZIP | .zip, .cbz | 必須 |
| RAR | .rar, .cbr | 必須 |
| 7z | .7z | 任意 |

### 画像形式

| 形式 | 拡張子 |
|------|--------|
| JPEG | .jpg, .jpeg |
| PNG | .png |
| WebP | .webp |
| GIF | .gif（静止画として） |

## 非機能要件

- NFR-1: ページ送り操作はストレスなく行える応答速度とする
- NFR-2: Windows / macOS / Linux で動作する（Tauri対応プラットフォーム）
- NFR-3: 大量の画像を含むアーカイブ（1000枚以上）でもメモリを圧迫しない

## 将来的な拡張候補（スコープ外）

以下は初期リリースのスコープ外とし、将来的に検討する。

- しおり（ブックマーク）機能
- サムネイル一覧表示
- 単ページ表示モードへの切り替え
- 画像の回転・拡大
- アーカイブ内アーカイブ（ネスト）の展開
